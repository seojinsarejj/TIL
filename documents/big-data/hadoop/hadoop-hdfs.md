# HDFS ( Hadoop Distributed File System )

> 하둡의 대표적인 파일시스템

## 특징

### Block File System

- 데이터를 블록 단위로 나눠서 저장
- 1.2.1에서 블록은 64MB, 2.0 부터는 128MB가 기본 블럭의 크기이다. (조정가능)
- 블럭의 메타데이터(파일정보, 파일명, 디렉토리 구조)등은 네임노드에 저장되며 메모리에 로드된다.


### 1. 장애복구
- 빠른시간안에 장애를 파악하고 대처할수 있도록 설계되었다. 또한 복제 데이터가 존재하므로 데이터 손실을 방지한다.

### 2. 스트리밍 방식의 데이터 접근
- HDFS는 스트리밍 방식으로 데이터에 접근한다.

### 3. 대용량 데이터 저장
- 높은 데이터 전송 대역폭, 하나의 클러스터에서 수백 대의 노드를 지원한다.

### 4. 데이터 무결성
- HDFS는 한번 저장한 데이터를 수정할 수 없고 읽기만 가능하다.


## 구성

### NameNode
> 마스터 서버 역할 ( 하둡 분산파일 시스템에 대한 마스터 데몬)
> 분산 파일 시스템의 네임스페이스를 관리 그리고 메타정보저장 및 관리를 진행한다.

**1. 메타데이터 관리**
- 파일시스템 이미지(파일명, 디렉토리, 파일 크기, 권한)와 블럭정보 mapping 

**2. 데이터 노드 모니터링**

- 데이터 노드는 3초단위로 상태정보와 블록정보를 담은 Heartbeat 시그널을 네임노드로 전송하며, 이 시그널이 오지않으면 장애노드로 판단하여 데이터를 새 노드로 복제.

- 용량이 부족한 노드 발견시 데이터 블록을 다른 노드로 이동.

- 블럭의 복제본수 유지. (복제본 수와 다른 블럭 발견시 삭제 또는 부족시 복제)

**3. 클라이언트 요청 처리**

- HDFS에 파일저장시 네임노드에서 요청을 받아 권한승인을 하거나, 조회시 어떤 블럭을 조회해야 하는지 알려줍니다.

- 단 실제 파일 저장은 Client가 직접 데이터 노드로 전송합니다.





### DataNode
>물리적인 데이터를 저장
### Secondary NameNode
> 보조 네임 노드는 변경이력을 파일시스템 이미지(메모리에 저장되어 있는 메타데이터를 저장한 파일)에 반영하는 작업을 한다.


