# 뮤텍스와 세마포어

#### 여러 프로세스나 쓰레드가 공유 자원에 접근하는 것을 제어하기 위한 방법

#### 즉, 병행 처리를 위한 프로세스 동기화 기법

## Mutex

- 한 쓰레드, 프로세스에 의해 소유될 수 있는 Key를 기반으로 한 상호배제기법
- Locking 매커니즘

### 화장실 예제

```bash
1. 화장실에 가려면 키가 필요하다.
2. 키를 누군가가 소지하고있다면 그 사람이 화장실을 사용중인 것이다.
3. 다른 사람은 그 사람이 나오기 전까지 사용할 수 없다.
4. 기다리던 사람은 나온 사람에게 키를 받아 화장실을 사용한다.
```

## Semaphore

- Signaling 메커니즘
- 현재 공유자원에 접근할 수 있는 쓰레드, 프로세스의 수를 나타내는 count을 두어 상호배제를 달성하는 기법
- count수에 따라서 1개이면 binary semaphore, 여러 개이면 counting semaphore라고 한다.

### 화장실 예제

```bash
1. 화장실에는 여러 개의 칸이 있고 화장실 입구에는 현재 화장실의 빈 칸 개수를 보여주는 전광판이 있다.
2. 만약 화장실을 사용하고자 한다면 전광판에서 빈 칸의 개수를 확인하고 빈 칸이 1개 이상이라면 빈 칸의 개수를 하나 뺀 후 화장실로 입장한다.
3. 화장실에서 나올 땐 다시 전광판의 빈 칸 개수를 하나 더해준다.
4. 모든 화장실이 차있다면 전광판의 숫자는 0이 되며 들어가고자 하는 사람이 있다면 빈 칸의 개수가 1로 바뀔때까지 기다려야한다.
```

## Mutex vs Semaphore

```
세마포어는 뮤텍스가 될 수 있지만, 뮤텍스는 세마포어가 될 수 없다.
뮤텍스는 바이너리 값을 갖는 세마포어다.(binary semaphore)
```
