# 정규 표현식

##### 정규 표현식(Regular Expressions)은 복잡한 문자열을 처리할 때 사용하는 기법으로, 파이썬만의 고유 문법이 아니라 문자열을 처리하는 모든 곳에서 사용한다.

## 메타 문자

메타 문자란 원래 그 문자가 가진 뜻이 아닌 특별한 용도로 사용하는 문자를 말한다.

`. ^ $ * + ? { } [ ] \ | ( )`

### 문자 클래스 []

#### `[]` 사이의 문자들과 매치

- `[abc]` : **a,b,c 중 한 개의 문자와 매치**

#### `-`을 사용하면 두 문자 사이의 범위를 의미한다.

- `[a-zA-Z]` : 알파벳 모두
- `[0-9]` : 숫자

#### `^` 메타 문자를 사용할 경우 반대(not)라는 의미를 갖는다.

- `[^0-9]` : 숫자를 제외한 문자만 매치

#### 자주 사용하는 문자클래스

|  표기  |                     뜻                     |     동일표현     |
| :----: | :----------------------------------------: | :--------------: |
| **\d** |                숫자와 매치                 |     `[0-9]`      |
| **\D** |           숫자가 아닌 것과 매치            |     `[^0-9]`     |
| **\s** |           whitespace 문자와 매치           | `[ \t\n\r\f\v]`  |
| **\S** |      whitespace 문자가 아닌 것과 매치      | `[^ \t\n\r\f\v]` |
| **\w** |       문자+숫자(alphanumeric)와 매치       |  `[a-zA-Z0-9_]`  |
| **\W** | 문자+숫자(alphanumeric)가 아닌 문자와 매치 | `[^a-zA-Z0-9_]`  |

### Dot(.)

#### 줄바꿈 문자인 `\n`을 제외한 모든 문자와 매치

- `a.b` : a + 모든문자 + b

  - `aab` : 매치
  - `a0b` : 매치
  - `abc` : 매치 X

### 반복

#### `*`

**바로 앞에 있는 문자가 0부터 무한대로 반복될 수 있다**

- `ca*t` : c + a(0번 이상 반복) + t
  - `ct` : 매치
  - `cat` : 매치
  - `caaat` : 매치

#### `+`

**바로 앞에 있는 문자가 최소 1번 이상 반복될 때 사용한다.**

- `ca+t` : c + a(1번 이상 반복) + t
  - `ct` : 매치 X
  - `cat` : 매치
  - `caaat` : 매치

#### `{m,n}`

**반복 횟수를 m번 이상 n번 이하로 고정한다.**

- `ca{2,5}t` : c + a(2~5회 반복) + t
- `ca{2,}t` : c + a(2회 이상 반복) + t
- `ca{,5}t` : c + a(5회 이하 반복) + t

#### `?`

**있어도 되고 없어도 된다**

- `ab?c`
  - `abc` : 매치
  - `ac` : 매치

### 정규식을 이용한 문자열 검색

|     Method     | 목적                                                                    |
| :------------: | :---------------------------------------------------------------------- |
|  **match()**   | 문자열의 처음부터 정규식과 매치되는지 조사한다.                         |
|  **search()**  | 문자열 전체를 검색하여 정규식과 매치되는지 조사한다.                    |
| **findall()**  | 정규식과 매치되는 모든 문자열(substring)을 리스트로 돌려준다.           |
| **finditer()** | 정규식과 매치되는 모든 문자열(substring)을 반복 가능한 객체로 돌려준다. |

### 사용 예시

다음과 같은 패턴을 만든다.

```python
import re
p = re.compile('[a-z]+')
```

#### match

```python
m = p.match("python")
print(m)
```

**"python"** 문자열은 `[a-z]+` 정규식에 부합되므로 match 객체를 돌려준다.

```python
m = p.match("3 python")
print(m)
>> None
```

**"3 python"** 문자열은 처음부터 정규식에 부합하지 않으므로 None을 돌려준다.

### search

그러나 **search**는 문자열의 처음부터 검색하는 것이 아니라 문자열 전체를 검색하기 때문에 매치된다.

### findall

```python
result = p.findall("life is too short")
print(result)
>> ['life', 'is', 'too', 'short']
```

**다음과 같이 패턴 생성 없이 정규표현식을 사용할 수 있다.**

```python
txt = 'abc@facebook.com와 bbc@google.com에서 이메일이 도착하였습니다.'
result = re.findall("\w+@[a-z.]+", txt)
print(result)
>> ['abc@facebook.com', 'bbc@google.com']
```
